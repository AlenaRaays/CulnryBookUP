@{
    @model IEnumerable<CulnryBookUP.Models.User>
}

<link rel="stylesheet" href="~/css/register.css" />
<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />

<body>
    <div class="register-container">
        <div class="register-card">
            <!-- шапка с японским вайбом -->
            <div class="brand-organic">
                <p>стань частью кулинарной книги</p>
            </div>

            <!-- форма регистрации с четырьмя полями: name, login, password, email -->
            <form method="post" action="/Register/Index" onsubmit="check">
                <!-- поле NAME -->
                <div class="input-group">
                    <label class="input-label" for="name">имя</label>
                    <input name="userName" type="text" id="name" class="input-field" placeholder="Введите имя" required>
                </div>

                <!-- поле LOGIN -->
                <div class="input-group">
                    <label class="input-label" for="login">логин</label>
                    <input name="Login" type="text" id="login" class="input-field" placeholder="Введите логин" required>
                </div>

                <!-- поле PASSWORD -->
                <div class="input-group">
                    <label class="input-label" for="password">пароль</label>
                    <input name="Password" type="password" id="password" class="input-field" placeholder="***********" required>
                    <div class="input-hint">минимум 8 символов</div>
                </div>

                <!-- поле EMAIL -->
                <div class="input-group">
                    <label class="input-label" for="email">email</label>
                    <input name="Email" type="email" id="email" class="input-field" placeholder="yandex или gmail, что выберешь ты?" required>
                </div>

                <!-- кнопка регистрации -->
                <button type="submit" class="register-button">создать аккаунт</button>

            </form>
            <script>
                document.querySelector('form').addEventListener('submit', 
                function(e) {
                    let name = document.getElementById('name').value;
                    let login = document.getElementById('login').value;
                    let password = document.getElementById('password').value;

                    let email = document.getElementById('email').value;
                    let atIndex = email.indexOf('@@');
                    let localPart = email.substring(0, atIndex);
                    let validChars = /^[a-zA-Z0-9._-]+$/;
                    
                    if (name.length < 3) {
                        e.preventDefault();
                        alert('Имя должно быть минимум 3 символа!');
                    }

                    if (login.length < 3) {
                        e.preventDefault();
                        alert('Логин должен быть минимум 3 символа!');
                    }

                    if (password.length < 8) {
                        e.preventDefault();
                        alert('Пароль должен быть минимум 8 символов');
                    }

                    if (localPart.length < 6) {
                        e.preventDefault();
                        alert('Почта должна содержать больше 6 символов');
                    }
                    if (!validChars.test(localPart)) {
                        e.preventDefault();
                        alert('Используйте только латинские буквы, цифры, точки, подчеркивания и дефисы')
                    };
                    if (localPart.startsWith('.') || localPart.endsWith('.')) {
                        e.preventDefault();
                        alert('Локальная часть не может начинаться или заканчиваться точкой')
                    }
                }
            );
            </script>

            <!-- разделитель -->
            <div class="separator">
                <span class="separator-line"></span>
                <span>уже есть аккаунт?</span>
                <span class="separator-line"></span>
            </div>

            <!-- ссылка на вход -->
            <div class="login-prompt">
                <a href="~/Account/Index" class="login-link">войти в существующий</a>
            </div>
        </div>
    </div>
</body>